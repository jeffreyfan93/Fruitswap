{"version":3,"sources":["webpack:///webpack/bootstrap cde07b0a1215996b7585","webpack:///./lib/fruitswap.js","webpack:///./lib/swap_logic.js","webpack:///./lib/board.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAC;;;;;;;ACPD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAiB,UAAU;AAC3B;AACA,oBAAmB,UAAU;AAC7B;AACA;;AAEA,6BAA4B;AAC5B;AACA;AACA;;AAEA,wCAAuC,EAAE,EAAE,EAAE;AAC7C;AACA;AACA,uCAAsC,IAAI;;AAE1C,sCAAqC,EAAE,EAAE,EAAE;AAC3C;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB,wBAAwB;AAC3C;AACA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;AACL,IAAG;AACH;;AAEA,kBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA0B,YAAY;AACtC;AACA;AACA,kBAAiB,yBAAyB;AAC1C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB,QAAQ;AACzB;;AAEA,oBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;;AAEA;AACA,oBAAmB,yBAAyB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"./lib/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cde07b0a1215996b7585","const drawGrid = require('./board');\nconst allowDrop = require('./swap_logic');\nconst drag = require('./swap_logic');\nconst drop = require('./swap_logic');\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  document.getElementById(\"game-grid\").appendChild(drawGrid(8,8));\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/fruitswap.js\n// module id = 0\n// module chunks = 0","const allowDrop = (ev) => {\n    ev.preventDefault();\n};\n\nconst drag = (ev) => {\n    ev.dataTransfer.setData(\"target\", ev.target.id);\n};\n\nconst drop = (ev) => {\n    ev.preventDefault();\n    var src = document.getElementById(ev.dataTransfer.getData(\"target\"));\n    var srcParent = src.parentNode;\n    var tgt = ev.currentTarget.firstElementChild;\n\n    ev.currentTarget.replaceChild(src, tgt);\n    srcParent.appendChild(tgt);\n};\n\nwindow.allowDrop = allowDrop;\nwindow.drag = drag;\nwindow.drop = drop;\n\nmodule.exports = allowDrop;\nmodule.exports = drag;\nmodule.exports = drop;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/swap_logic.js\n// module id = 1\n// module chunks = 0","const fruitImages = [\n  \"./lib/images/apple.png\",\n  \"./lib/images/blueberry.png\",\n  \"./lib/images/grapes.png\",\n  \"./lib/images/kiwi.png\",\n  \"./lib/images/lemon.png\",\n  \"./lib/images/orange.png\",\n  \"./lib/images/watermelon.png\",\n];\n\nconst fruits = [\n  'apple',\n  'blueberry',\n  'grapes',\n  'kiwi',\n  'lemon',\n  'orange',\n  'watermelon'\n];\n\nconst drawGrid = (rows, cols) => {\n  let count = 0;\n  let grid = document.createElement('div');\n  grid.className = 'grid';\n  for (let i = 0; i < cols; i++){\n    let col = grid.appendChild(document.createElement('div'));\n    for (let j = 0; j < rows; j++){\n      let cell = col.appendChild(document.createElement(`div`));\n      let fruit = cell.appendChild(document.createElement(`img`));\n\n      // fruit.innerHTML = {type: ++count};\n      const img = fruitImages[Math.floor(Math.random() * fruitImages.length)];\n      const obj = img.substr(13).replace('.png','');\n      fruit.setAttribute(\"src\", img);\n\n      fruit.setAttribute(\"id\", `fruit${j}${i}`);\n      fruit.setAttribute(\"draggable\", 'true');\n      fruit.setAttribute(\"ondragstart\", \"drag(event)\");\n      fruit.className = `fruit-item ${obj}`;\n\n      cell.setAttribute(\"id\", `cell${j}${i}`);\n      cell.setAttribute(\"ondrop\", \"drop(event)\");\n      cell.setAttribute(\"ondragover\", \"allowDrop(event)\");\n    }\n  }\n\n  checkForMatches(grid);\n\n  return grid;\n};\n\nconst checkForMatches = (grid) => {\n  let allMatchedPos = [];\n  fruits.forEach(fruit => {\n    const allOneFruit = grid.getElementsByClassName(fruit);\n    const fruitPos = [];\n\n    for (let i = 0; i < allOneFruit.length; i++) {\n      fruitPos.push(parseInt(allOneFruit[i].id.substr(5)));\n    }\n\n    checkHorizontalMatch(fruitPos).forEach(pos => {\n      allMatchedPos.push(pos);\n    });\n\n    checkVerticalMatch(fruitPos).forEach(pos => {\n      allMatchedPos.push(pos);\n    });\n  });\n  const uniqMatchedPos = [];\n\n  for (let i = 0; i < allMatchedPos.length; i++) {\n    if (uniqMatchedPos.indexOf(allMatchedPos[i]) === -1) {\n      uniqMatchedPos.push(allMatchedPos[i]);\n    }\n  }\n};\n\nconst checkHorizontalMatch = (fruitPos) => {\n  fruitPos.sort((a,b) => {return a-b;});\n  const matchedPos = [];\n  let maybeMatchedPos = [];\n  for (let i = 0; i < fruitPos.length - 1; i++) {\n    if (maybeMatchedPos.length === 0) {\n      maybeMatchedPos.push(fruitPos[i]);\n    }\n\n    if (fruitPos[i] + 1 === fruitPos[i + 1]) {\n      maybeMatchedPos.push(fruitPos[i + 1]);\n      if ((i === fruitPos.length - 1) && (maybeMatchedPos.length >= 3)) {\n        maybeMatchedPos.forEach(pos => {\n          matchedPos.push(pos);\n        });\n        maybeMatchedPos = [];\n      }\n    } else {\n      if (maybeMatchedPos.length >= 3) {\n        maybeMatchedPos.forEach(pos => {\n          matchedPos.push(pos);\n        });\n      }\n      maybeMatchedPos = [];\n    }\n  }\n  return matchedPos;\n};\n\nconst checkVerticalMatch = (fruitPos) => {\n  const matchedPos = [];\n  for (let i = 0; i < 10; i++) {\n    let modArray = [];\n\n    for (let j = 0; j < fruitPos.length; j++) {\n      if (fruitPos[j]%10 === i) {\n        modArray.push(fruitPos[j]);\n      }\n    }\n\n    let maybeMatchedPos = [];\n    for (let k = 0; k < modArray.length - 1; k++) {\n      if (maybeMatchedPos.length === 0) {\n        maybeMatchedPos.push(modArray[k]);\n      }\n      if (modArray[k] + 10 === modArray[k + 1]) {\n        maybeMatchedPos.push(modArray[k + 1]);\n        if ((k === modArray.length - 2) && (maybeMatchedPos.length >= 3)) {\n          maybeMatchedPos.forEach(pos => {\n            matchedPos.push(pos);\n          });\n          maybeMatchedPos = [];\n        }\n      } else {\n        if (maybeMatchedPos.length >= 3) {\n          maybeMatchedPos.forEach(pos => {\n            matchedPos.push(pos);\n          });\n        }\n        maybeMatchedPos = [];\n      }\n    }\n  }\n  return matchedPos;\n};\n\nmodule.exports = drawGrid;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/board.js\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}